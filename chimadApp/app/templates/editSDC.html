<html>
	<head>  
		<meta charset='UTF-8' name='viewport' content='width=device-width, user-scalable=no'> 
		<title>CHiMaD</title>
		<link rel='stylesheet' type='text/css' href='static/css/index.css' />
		<link rel='stylesheet' type='text/css' href='static/css/jquery-ui.css' />

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-KKMQ8GLNT1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-KKMQ8GLNT1');
        </script>

	</head>

	<body>
		<!-- add in the login button, dropdown and branding -->
		<div id='login' class='modal' style='display:none'></div>
		<div id='branding' style='width:100%;'></div>
		<script src='static/js/addHeader.js'></script>
		<script>
			document.getElementById('brandingContainer').innerHTML += "\
				<div style='font-size:2.5vw; font-style:italic; padding-left:1vw; line-height:3vw'>Customize: Edit and Export Your System Design Chart</div>\
				<hr class='simpleLine'>\
			"
		</script>


		<!-- page content -->

		<!-- including this but hidden so that the other functions that compile the selection words can work as usual -->
		<div id='paragraphForm' style="width:100%; display:none;">

			<div id='paraForm' class='para'>

				<div id='paraText'>
					Polymer matrix composites are traditionally valued for use in [[lightweight mechanical]] applications (aerospace, automotive, etc.) due to their attractive combination of mechanical properties ([[toughness]], [[strength/stiffness]]) and [[low density]]. For use in [[extreme environments]], these materials must possess [[slow degradation rates when exposed to O_{2}_, H_{2}_O, and salts]]. Moreover, maintaining structural integrity over a wide temperature range requires a low [[thermal expansion coefficient mismatch]] between matrix/reinforcement and a high [[glass transition temperature (T_{g}_)]]. Composites must also demonstrate excellent [[resistance to fracture]], determined in part by the mechanical properties (described above) and by the preferred [[failure mode]], which is a function of the [[reinforcement architecture]] and [[fiber/matrix interface]]. The [[polymer matrix]] [[is prepared]] by combining epoxy, crosslinker, and filler (as-needed), which controls the [[crosslinking density]] and [[heterogeneity]] within the matrix structure. [[The choice and preparation of reinforcement]] sets the [[morphology]] and [[microstructure of the reinforcement phase]].  The architecture of the reinforcement (and therefore, composite) is set during [[layup and curing]] and is defined by the [[dispersion]], [[aggregation]], and [[orientation of the reinforcement]]. [[Post-layup annealing and aging]] can improve the [[matrix/reinforcement interface]], and is critical to the mechanical properties, particularly the failure mode and toughness.
				</div>
			</div>


		</div>
		<div id="systemDesignChart">
			<div class="para">

				<div id='paragraphnameSelector' style='margin-bottom:20px'>
					<div id="paragraphnameInstructions" class="instructions">1. Select your paragraph. </div>
				</div>

				<div id="SDCInstructions" class="instructions">2. Click the edit button below to alter the system design chart.  In edit mode, you can click+drag to move the boxes around and double-click in a box to edit the text.  Outside of edit mode, you can also add annotations to user-added ("your responses") connection lines by double-clicking a line.  While editing text, subscripts can be included as "_{subscripted text}_", superscripts can be included as "^{superscripted text}^", bullets can be included with "{-}".  Once you are finished editing the text, click outside of the textbox.   </div>


				<button class='secondaryButton' id='SDCEditButton' style='margin-bottom:20px;'>edit</button>
				<button class='secondaryButton' id='SDCDoneButton' style='margin-bottom:20px; display:none'>done</button>

				<div id="boxGrid" style='position:static'>

					<form id="SDCCompileOptions" class='versionOptions'>
						<div>Select which method to build the initial systems design chart.</div>
						<input type="radio" id="SDCAnswersBuild" name="compile" value="answers" class="radio" checked>
						<label for="SDCAnswersBuild" id="SDCAnswersBuildLabel">Build from answers.</label><br>
						<input type="radio" id="SDCConsensusBuild0" name="compile" value="consensus0" class="radio">
						<label for="SDCConsensusBuild0" id="SDCConsensusBuild0Label">Build from overall consensus.</label><br>
						<input type="radio" id="SDCConsensusBuild1" name="compile" value="consensus1" class="radio">
						<label for="SDCConsensusBuild1" id="SDCConsensusBuild1Label">Build from initial consensus.</label><br>
						<input type="radio" id="SDCConsensusBuild2" name="compile" value="consensus2" class="radio">
						<label for="SDCConsensusBuild2" id="SDCConsensusBuild2Label">Build from final consensus.</label><br>

						<div style='margin-left:20px' id='paraAggDateUI'>
							<p>Date range for aggregating paragraph responses.  Click and drag to select a region.  Double click to reset.</p>
							<div id='paraDateHistContainer' style='margin-left:40px'></div>
						</div>	
					</form>
				</div>

				<form id="SDCVersionOptions" class='versionOptions'>
					<div>Use the buttons below to select which version of the aggregated responses to display and which lines to show.</div>
					<input type="checkbox" id="SDCResponseToggle" name="responses" value="1" class="radio" checked>
					<label for="SDCResponseToggle" id="SSDCResponseToggleLabel">Show your responses (black lines)</label><br>

					<input type="checkbox" id="SDCAnswerToggle" class='answerToggle' name="answers" value="1" class="radio" checked>
					<label for="SDCAnswerToggle" id="SDCAnswerToggleLabel" class='answerToggle'>Show answers (gray lines)</label><br>

					<div id='SDCAggToggleDiv'>
						<input type="checkbox" id="SDCAggToggle" class='aggToggle' name="aggregate" value="1" class="radio" checked>
						<label for="SDCAggToggle" id="SDCAggToggleLabel" class='aggToggle'>Show aggregate responses (colored lines)</label><br>
		
						<input type="radio" id="SDCVersion0" name="version" value="0" class="radio" checked>
						<label for="SDCVersion0" id="SDCVersion0Label">Aggregate all responses</label><br>
						<input type="radio" id="SDCVersion1" name="version" value="1" class="radio">
						<label for="SDCVersion1" id="SDCVersion1Label">Aggregate initial responses</label><br>
						<input type="radio" id="SDCVersion2" name="version" value="2" class="radio">
						<label for="SDCVersion2" id="SDCVersion2Label">Aggregate final responses</label><br>


						<div style='margin-left:20px; margin-top:10px' id='SDCAggFracUI'>
							<div style='display:block'>
								<div style='display: table-cell'>Agreement fraction to display:</div>
								<div style='display: table-cell; width:40px; text-align:right' id="SDCAggFracRangeSliderMin">0.00</div>
								<div style='display: table-cell; width:20vw; padding-left:10px'>
									<div id="SDCAggFracRangeSlider"></div>
								</div>
								<div style='display: table-cell; padding-left:10px; width:70px' id="SDCAggFracRangeSliderMax">1.00</div>
							</div>
						</div>

						<div style='margin-left:20px' id='SDCAggDateUI'>
							<p>Date range for aggregating SDC responses.  Click and drag to select a region.  Double click to reset.</p>
							<div id='SDCDateHistContainer' style='margin-left:40px'></div>
						</div>	
					</div>

				</form>




				<div id="systemDesignChartSVGContainer"></div>


				<div id="SDCButtons">
					<button id='saveAsPNG' class="button" style="margin-left:20px">Save as .png</button>
					<button id='saveAsSVG' class="button" style="margin-left:20px">Save as .svg</button>
					<button id='saveAsPPTX' class="button" style="margin-left:20px">Save as .pptx</button>
				</div>
			</div>
		</div>


		<!-- Libraries -->
		<script src='static/lib/d3.v6.min.js'></script>
		<script src="static/lib/jquery-3.5.1.min.js"></script> <!-- for AJAX  -->
		<script src="static/lib/jquery-ui.min.js"></script> <!-- for slider  -->
		<script src="static/lib/saveSvgAsPng.js"></script> <!-- for saving as a png; https://github.com/exupero/saveSvgAsPng -->
		<script src="static/lib/pptxgen.bundle-AMG.js"></script> <!-- for saving as a pptx; https://github.com/gitbrent/PptxGenJS ; I made default line end caps round -->
		<script src="static/lib/svg-export.min.js"></script><!-- https://sharonchoong.github.io/svg-exportJS/svg-export.min.js  -->

		<!-- my codes -->
		<script src="static/js/params.js"></script>
		<script src="static/js/utils.js"></script>
		<script src="static/js/formHandler.js"></script>
		<script src="static/js/reader.js"></script>
		<script src="static/js/initBars.js"></script>
		<script src="static/js/initDropdowns.js"></script>
		<script src="static/js/initSystemDesignChart.js"></script>
		<script src="static/js/resize.js"></script>
		<script src="static/js/editSDC.js"></script>
		<script src="static/js/histogram.js"></script>
		<script src="static/js/init.js"></script>

		<!-- to get the IP address of the user -->
		<!-- <script type="application/javascript" src="https://api.ipify.org?format=jsonp&callback=getIP"></script> -->

		<script>
			if ({{ inDesktopApp|tojson|safe }}){
				console.log('running in desktop app')
				var script = document.createElement("script");  
				script.src = 'static/js/forFlaskWebGUI.js';
				document.body.appendChild(script);  
			}
		</script>
		
	</body>
</html>
