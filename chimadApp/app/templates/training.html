<html>
	<head>  
		<meta charset='UTF-8' name='viewport' content='width=device-width, user-scalable=no'> 
		<title>CHiMaD</title>
		<link rel='stylesheet' type='text/css' href='static/css/index.css' />
		<link rel='stylesheet' type='text/css' href='static/css/jquery-ui.css' />
		
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-KKMQ8GLNT1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-KKMQ8GLNT1');
        </script>

	</head>

	<body>
		<!-- add in the login button, dropdown and branding -->
		<div id='login' class='modal' style='display:none'></div>
		<div id='branding' style='width:100%;'></div>
		<script src='static/js/addHeader.js'></script>
		<script>
			document.getElementById('brandingContainer').innerHTML += "\
				<div style='font-size:2.5vw; font-style:italic; padding-left:1vw; line-height:3vw'>Collaborate: Think or Train Together</div>\
				<hr class='simpleLine'>\
			"
		</script>


		<!-- page content -->
		<div id='paragraphForm' style='margin-top:30vh'>

			<div id='paraForm' class='para'>

				<div id='paragraphnameSelector' style='margin-bottom:20px'>
					<div id="paragraphnameInstructions" class="instructions">1. Select your paragraph. </div>
				</div>

				<div id="usernameInstructions" class="instructions">2. Enter a unique user name below (e.g., your name plus a number). </div>
				<label for="username" id="usernameLabel">user name:</label>
				<input type="text" id="usernameInput" name="username">
				<div id="usernameNotification" class="notifications" style="margin:20;"></div>
				<br>

				<div id="paraInstructions" class="instructions">3. Classify each term below that is within a gray box.  The possible categories are <span class="processingWord">Processing</span>, <span class="structureWord">Structure</span>, <span class="propertyWord">Property</span> or <span class="performanceWord">Performance</span>.  When you are finished please click the submit button.</div>

				<div id='paraText'>
					Polymer matrix composites are traditionally valued for use in [[lightweight mechanical]] applications (aerospace, automotive, etc.) due to their attractive combination of mechanical properties ([[toughness]], [[strength/stiffness]]) and [[low density]]. For use in [[extreme environments]], these materials must possess [[slow degradation rates when exposed to O_{2}_, H_{2}_O, and salts]]. Moreover, maintaining structural integrity over a wide temperature range requires a low [[thermal expansion coefficient mismatch]] between matrix/reinforcement and a high [[glass transition temperature (T_{g}_)]]. Composites must also demonstrate excellent [[resistance to fracture]], determined in part by the mechanical properties (described above) and by the preferred [[failure mode]], which is a function of the [[reinforcement architecture]] and [[fiber/matrix interface]]. The [[polymer matrix]] [[is prepared]] by combining epoxy, crosslinker, and filler (as-needed), which controls the [[crosslinking density]] and [[heterogeneity]] within the matrix structure. [[The choice and preparation of reinforcement]] sets the [[morphology]] and [[microstructure of the reinforcement phase]].  The architecture of the reinforcement (and therefore, composite) is set during [[layup and curing]] and is defined by the [[dispersion]], [[aggregation]], and [[orientation of the reinforcement]]. [[Post-layup annealing and aging]] can improve the [[matrix/reinforcement interface]], and is critical to the mechanical properties, particularly the failure mode and toughness.
				</div>
			</div>


			<button class="button" style="margin-left:20px" onclick="onParaSubmit()">Submit</button>
			<div id="paraNotification" class="notifications" style="margin:20px">Please click the Submit button above when you have completed your work.</div>
		</div>

		<div class="verticalLine" id='verticalLine1' style='display:none'></div>
		<div class="horizontalLine" id='horizontalLine1' style='display:none'></div>

		<!-- default is for this on the right -->
		<div id="boxGrid" style='margin-top:30vh'>
			<div class="para">

				<div id="boxGridInstructions" class="instructions">4. After you submit your responses, this visualization will populate with the aggregate results from the paragraph. </div>

				<div id="boxGridNResponses" style='margin: 10px 10px 10px 40px'></div>


				<form id="paraVersionOptions" class='versionOptions'>
					<div>After you submit your responses, select which version of the aggregated responses to display and whether to show the answers.</div>
					<input type="checkbox" id="paraAnswerToggle" class='answerToggle' name="answers" value="1" class="radio" checked>
					<label for="paraAnswerToggle" class='answerToggle'>Show answers (black boxes)</label><br>

					<input type="radio" id="paraVersion0" name="version" value="0" class="radio" checked>
					<label for="paraVersion0">Aggregate all responses</label><br>
					<input type="radio" id="paraVersion1" name="version" value="1" class="radio">
					<label for="paraVersion1">Aggregate initial responses</label><br>
					<input type="radio" id="paraVersion2" name="version" value="2" class="radio">
					<label for="paraVersion2">Aggregate final responses</label><br>

					<div style='margin-left:20px' id='paraAggDateUI'>
						<p>Date range for aggregating paragraph responses.  Click and drag to select a region.  Double click to reset.</p>
						<div id='paraDateHistContainer' style='margin-left:40px'></div>
					</div>	
				</form>

				<div id="boxGridSVGContainer"></div>


			</div>
		</div>

		<!-- default is for this on the bottom -->
		<div class="horizontalLine" id='horizontalLine2'></div>

		<div id="systemDesignChart">
			<div class="para">

				<div id="SDCInstructions" class="instructions">5. After you submit your second response to Part 2 (above), this visualization will populate and allow you to construct a system design chart.  Click+drag lines to connect boxes in each column with the adjacent column(s).  When you have completed your chart, click the submit button below.  After clicking submit, the results from the rest of your paragraph will also be shown.  </div>

				<div id="SDCNResponses" style='margin: 10px 10px 10px 40px'></div>

				<form id="SDCVersionOptions" class='versionOptions'>
					<div>After you submit your responses, use the buttons below to select which version of the aggregated responses to display and which lines to show.</div>
					<input type="checkbox" id="SDCResponseToggle" name="responses" value="1" class="radio" checked>
					<label for="SDCResponseToggle" id="SSDCResponseToggleLabel">Show your responses (black lines)</label><br>

					<input type="checkbox" id="SDCAnswerToggle" class='answerToggle' name="answers" value="1" class="radio" checked>
					<label for="SDCAnswerToggle" id="SDCAnswerToggleLabel" class='answerToggle'>Show answers (gray lines)</label><br>
					
					<input type="checkbox" id="SDCAggToggle" class='aggToggle' name="aggregate" value="1" class="radio" checked>
					<label for="SDCAggToggle" id="SDCAggToggleLabel" class='aggToggle'>Show aggregate responses (colored lines)</label><br>
	
					<input type="radio" id="SDCVersion0" name="version" value="0" class="radio" checked>
					<label for="SDCVersion0">Aggregate all responses</label><br>
					<input type="radio" id="SDCVersion1" name="version" value="1" class="radio">
					<label for="SDCVersion1">Aggregate initial responses</label><br>
					<input type="radio" id="SDCVersion2" name="version" value="2" class="radio">
					<label for="SDCVersion2">Aggregate final responses</label><br>


					<div style='margin-left:20px; margin-top:10px' id='SDCAggFracUI'>
						<div style='display:block'>
							<div style='display: table-cell'>Agreement fraction to display:</div>
							<div style='display: table-cell; width:40px; text-align:right' id="SDCAggFracRangeSliderMin">0.00</div>
							<div style='display: table-cell; width:20vw; padding-left:10px'>
								<div id="SDCAggFracRangeSlider"></div>
							</div>
							<div style='display: table-cell; padding-left:10px; width:70px' id="SDCAggFracRangeSliderMax">1.00</div>
						</div>
					</div>

					<div style='margin-left:20px' id='SDCAggDateUI'>
						<p>Date range for aggregating SDC responses.  Click and drag to select a region.  Double click to reset.</p>
						<div id='SDCDateHistContainer' style='margin-left:40px'></div>
					</div>	
				</form>


				<div id="systemDesignChartSVGContainer"></div>


				<div id="SDCButton">
					<button class="button" style="margin-left:20px" onclick="onSDCSubmit()">Submit</button>
					<div id="SDCNotification" class="notifications" style="margin:20px">Please click the Submit button above when you have completed your work.</div>
				</div>

			</div>
		</div>


		<!-- Libraries -->
		<script src='static/lib/d3.v6.min.js'></script>
		<script src="static/lib/jquery-3.5.1.min.js"></script> <!--  for AJAX -->
		<script src="static/lib/jquery-ui.min.js"></script> <!-- for slider  -->

		<!-- my codes -->
		<script src="static/js/params.js"></script>

		<script>
			params.inCollaborate = true;
			if ({{ inDesktopApp|tojson|safe }}){
				console.log('running in desktop app')
				var script = document.createElement("script");  
				script.src = 'static/js/forFlaskWebGUI.js';
				document.body.appendChild(script);  
			}
		</script>

		<!-- my codes -->
		<script src="static/js/utils.js"></script>
		<script src="static/js/formHandler.js"></script>
		<script src="static/js/reader.js"></script>
		<script src="static/js/initDropdowns.js"></script>
		<script src="static/js/initBars.js"></script>
		<script src="static/js/initSystemDesignChart.js"></script>
		<script src="static/js/resize.js"></script>
		<script src="static/js/histogram.js"></script>
		<script src="static/js/init.js"></script>

		<!-- to get the IP address of the user -->
		<!-- <script type="application/javascript" src="https://api.ipify.org?format=jsonp&callback=getIP"></script> -->


		
	</body>
</html>
